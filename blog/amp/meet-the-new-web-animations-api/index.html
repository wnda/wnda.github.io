<!doctype html>
<html amp lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1">
    <title>Meet the new Web Animations API · A. M. Douglas · Leeds, UK</title>
    <link rel="manifest" href="https://amdouglas.com/manifest.json">
    <link rel="canonical" href="https://amdouglas.com/blog/meet-the-new-web-animations-api/">
    <link rel="publisher" href="https://plus.google.com/+AMDouglasCom">
    <link rel="icon" href="https://amdouglas.com/favicon.ico">
    <meta name="format-detection" content="telephone=no;email=no">
    <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="author" content="Adam Michael Douglas">
    <meta name="description" content="While browser support for the Web Animations API may look rather bleak at the moment, when the other browsers catch up, it will be the sharpest and fastest way to animate anything without resorting to WebGL...">
    <meta name="twitter:title" content="Meet the new Web Animations API">
    <meta name="twitter:description" content="While browser support for the Web Animations API may look rather bleak at the moment, when the other browsers catch up, it will be the sharpest and fastest way to animate anything without resorting to WebGL...">
    <meta name="twitter:site" content="@amdgls">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="A. M. Douglas">
    <meta name="twitter:url" content="https://amdouglas.com/blog/amp/meet-the-new-web-animations-api/">
    <meta name="twitter:domain" content="amdouglas.com">
    <meta name="twitter:image:src" content="https://amdouglas.com/assets/img/favicon-196x196.png">
    <meta name="twitter:image:alt" content="Blog &middot; A. M. Douglas">
    <meta property="fb:admins" content="407402372749613">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="A. M. Douglas">
    <meta property="og:title" content="Meet the new Web Animations API">
    <meta property="og:description" content="While browser support for the Web Animations API may look rather bleak at the moment, when the other browsers catch up, it will be the sharpest and fastest way to animate anything without resorting to WebGL...">
    <meta property="og:locale" content="en_GB">
    <meta property="og:url" content="https://amdouglas.com/blog/amp/meet-the-new-web-animations-api/">
    <meta property="og:image" content="https://amdouglas.com/assets/img/favicon-196x196.png">
    <meta property="og:image:secure_url" content="https://amdouglas.com/assets/img/favicon-196x196.png">
    <meta property="article:section" content="Web development">
    <meta property="article:publisher" content="https://www.facebook.com/amdgls">
    <meta property="article:tag" content="javascript,css,html5,js">
    <meta property="article:author" content="https://amdouglas.com/me/">
    <meta property="article:published_time" content="2016-10-28T08:00:02.000Z">
    <meta property="article:modified_time" content="2016-10-28T08:00:02.000Z">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "NewsArticle",
        "mainEntityOfPage": "https://amdouglas.com/blog/amp/meet-the-new-web-animations-api/",
        "headline": "Meet the new Web Animations API",
        "datePublished": "2016-10-28T08:00:02+00:00",
        "dateModified": "2016-10-28T08:00:02+00:00",
        "description": "While browser support for the Web Animations API may look rather bleak at the moment, when the other browsers catch up, it will be the sharpest and fastest way to animate anything without resorting to WebGL...",
        "author": {
          "@type": "Person",
          "name": "A. M. Douglas"
        },
        "publisher": {
          "@type": "Organization",
          "name": "A. M. Douglas",
          "logo": {
            "@type": "ImageObject",
            "url": "https://amdouglas.com/assets/img/apple-touch-icon-60x60.png",
            "width": 60,
            "height": 60
          }
        },
        "image": {
          "@type": "ImageObject",
          "url": "https://amdouglas.com/assets/img/apple-touch-icon-60x60.png",
          "height": 60,
          "width": 60
        }
      }
    </script>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-font" src="https://cdn.ampproject.org/v0/amp-font-0.1.js"></script>
    <script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>
    <script async custom-element="amp-user-notification" src="https://cdn.ampproject.org/v0/amp-user-notification-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-install-serviceworker" src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:fallback;src:local('Rubik'),local('Rubik-Regular'),url(https://amdouglas.com/assets/fonts/Rubik-Regular.woff2) format('woff2'),url(https://amdouglas.com/assets/fonts/Rubik-Regular.woff) format('woff')}@font-face{font-family:'Rubik';font-style:normal;font-weight:700;font-display:fallback;src:local('Rubik Bold'),local('Rubik-Bold'),url(https://amdouglas.com/assets/fonts/Rubik-Bold.woff2) format('woff2'),url(https://amdouglas.com/assets/fonts/Rubik-Bold.woff) format('woff')}html{-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-webkit-font-smoothing:subpixel-antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-overflow-scrolling:touch;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;touch-action:manipulation;font:normal normal 400 16px/1.2 Roboto,-apple-system,Arial,Helmet,Freesans,sans-serif}html,body{height:100%}*,:before,:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;touch-action:manipulation;margin:0;padding:0;border:0;font:inherit}article,footer,header,main,nav,section{display:block}a{-webkit-text-decoration-skip:objects;text-decoration:none}a{-webkit-user-select:none;-moz-user-select:none}a{color:inherit;cursor:pointer}[disabled]{opacity:.6;cursor:not-allowed}[hidden]{display:none}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:#07071c}::-webkit-scrollbar-track{background-color:transparent;background:rgba(0,0,0,0)}::selection{background:#07071c;color:#fff}.fonts-loaded{font-family:'Rubik',Roboto,-apple-system,Arial,Helvetica,sans-serif}body{position:relative;margin:0 auto;color:#07071c;background:#fff;z-index:1}main{margin:0 auto;max-width:720px;padding:56px 16px 16px;position:relative;z-index:2;background-color:#fff}main>header{position:absolute;z-index:99;top:20px;left:16px;color:#07071c;text-transform:uppercase;letter-spacing:4px;font-weight:700}main>nav{position:absolute;z-index:99;top:20px;right:16px}article{padding:30px 0;border-bottom:1px solid #f2f2f0}h1{font-weight:700;letter-spacing:-0.02em;font-size:42px;line-height:1.1;margin-bottom:30px}article>section,article>footer{font-family:Roboto,-apple-system,Arial,Helvetica,sans-serif}.fonts-loaded h2,.fonts-loaded h3,.fonts-loaded h4,.fonts-loaded h5,.fonts-loaded h6,.fonts-loaded footer header,.fonts-loaded footer hr~p{font-family:'Rubik',Roboto,-apple-system,Arial,Helvetica,sans-serif}h3,h4,h5,h6,footer header{letter-spacing:-0.02em;font-weight:700;font-size:24px;line-height:1.3;margin-top:50px;margin-bottom:0px}article>section h2,article>section h3,article>section h4,article>section h5,article>section h6{letter-spacing:-0.02em;font-weight:700;font-size:36px;line-height:1.2;margin-top:50px;margin-bottom:0px}article>section p{font-weight:400;font-size:21px;line-height:1.5;letter-spacing:-.002em;margin-top:30px;margin-bottom:0;-webkit-hyphens:auto;hyphens:auto}article>section a{text-decoration:underline}article>section hr{border:0;padding:0;display:block;width:15%;margin:30px auto;border:0px solid #c2c2dc;border-top: 1px solid #c2c2dc}article>section blockquote{margin:0 0 30px;border-left:3px solid #c2c2dc;padding-left:1em;padding-right:2em}article>section blockquote p{letter-spacing:0.01em;margin-top:1.5em;font-size:1.1em;padding-bottom:3px}article>section ul,article>section ol{margin:15px 0 15px;list-style-position:inside;list-style-type:square}article>section li{padding:0;font-weight:400;font-size:21px;line-height:30px;margin-bottom:8px}article>section ol li{list-style-type:decimal}article>footer{padding:50px 0 0 0}footer header{border-top:1px solid #c2c2dc;padding:16px 0;color:#83838e;font-size:10px;text-transform:uppercase; letter-spacing:1px}footer>a:first-of-type{border-bottom:1px solid #c2c2dc}article>footer hr{border:0;padding:0;display:block;width:15%;margin:16px 0;border:0px solid #c2c2dc;border-top: 1px solid #c2c2dc}article>footer>a{display:block;padding-bottom:32px}article>footer>a h4,article>footer>a p{opacity:.7;-webkit-transition:.2s cubic-bezier(.4,0,.2,1) opacity; transition:.2s cubic-bezier(.4,0,.2,1) opacity}article>footer>a:hover h4,article>footer>a:hover p{opacity:1}article>footer>a h4{font-size:18px;line-height:1.1;padding:0;margin:0}article>footer>a header{padding-bottom:32px}article>footer>a p{font-size:14px;line-height:1.3;font-weight:400;padding:0;margin:18px 0}article>footer>a hr~p{color:#83838e;margin:0;font-weight:400}pre,code,kbd,.fonts-loaded pre,.fonts-loaded code,.fonts-loaded kbd{font-family:Cousine,Menlo,Consolas,Monaco,Courier,monospace}pre,code,kbd{font-size:15px;border-radius:3px;background-color:#e6e6e9;border:1px dotted #c2c2dc}pre,pre>code{margin-top:1.5em;margin-bottom:1.5em;color:#000;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:scroll}pre>code{border:0;padding-right:0;padding-left:0}kbd{display:inline-block;padding:.25ex .5em}img{width:100%;display:block;margin-top:1.5em;max-width:100%;margin-bottom:1.5em;position:relative;height:auto;min-height:64px}img[data-src]:before{content:'';display:block;position:absolute;top:0;left:0;right:0;bottom:0;background-color:#e6e6e9;border:1px dotted #c2c2dc;-webkit-border-radius:5px;border-radius:5px}img[data-src]:after{content:'Image: "' attr(data-src) '"';display:block;font-size:16px;color:#83838e;position:absolute;top:24px;left:0;right:0;bottom:0;text-align:center}.cursor,.fonts-loaded .cursor{font-family:'Rubik',Roboto,-apple-system,Arial,Helvetica,sans-serif;color:#2196f3}@media only screen and (min-width:768px){body:before{content:'';position:absolute;position:fixed;top:0;left:0;bottom:0;right:0;width:100%;height:100%;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:100vw;perspective:100vw;will-change:transform;background-color:#2196f3;background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2256%22%20height%3D%22100%22%3E%3Cpath%20d%3D%22M28%2066L0%2050L0%2016L28%200L56%2016L56%2050L28%2066L28%20100%22%20fill%3D%22none%22%20stroke-opacity%3D%220.4%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222%22/%3E%3Cpath%20d%3D%22M28%200L28%2034L0%2050L0%2084L28%20100L56%2084L56%2050L28%2034%22%20fill%3D%22none%22%20stroke-opacity%3D%220.2%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222%22/%3E%3C/svg%3E');background-repeat:repeat;z-index:-1}main{padding:56px 32px 32px}main>header{left:32px}main>nav{right:32px}article>footer{font-size:0}article>footer>a{display:inline-block;vertical-align:top;width:45%}article>footer>a:nth-child(1){margin-right:10%}}@media only screen and (min-width:1050px){main{margin:0 auto auto 15%}}@-webkit-keyframes onoff{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes onoff{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@supports (-webkit-animation-name:flicker){.cursor{-webkit-animation:onoff .9s cubic-bezier(.4,0,.2,1) infinite}}@supports (animation-name:flicker){.cursor{animation:onoff .9s cubic-bezier(.4,0,.2,1) infinite}}amp-user-notification{padding:8px 16px;left:auto;right:16px;bottom:16px;width:auto;border-radius:4px;background:#07071c;color:#fff;font-size:14px;text-align:center;box-shadow:0 15px 30px rgba(7,7,28,.1), 0 4px 12px rgba(7,7,28,.15), 0 2px 6px rgba(7,7,28,.1)}amp-user-notification p{margin:1ex auto}amp-user-notification a,amp-user-notification button{cursor:pointer;display:inline-block;font-weight:700;font-size:12px;padding:8px;background:#fff;color:#07071c;margin-bottom:1ex;border-radius:2px}article{overflow:hidden}@keyframes demo{from,0%{opacity:0;visibility:hidden}to,100%{opacity:1;visibility:visible}}.demo{animation-name:demo;animation-timing-function:cubic-bezier(0.4,0,0.2,1);animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode: forwards;animation-direction: normal;animation-delay: 0;animation-play-state:initial;padding:8px;display: inline-block;background: #07071c;color: #fff;}@keyframes marquee1 {from,0%{transform:translateX(0)}to,100%{transform:translateX(-100%)}}.marquee{display:block;white-space:nowrap;padding-top:16px;font-size:0;animation-name:marquee1;animation-timing-function:linear;animation-duration:8s;animation-iteration-count:infinite;animation-fill-mode: forwards;animation-direction:alternate}.marquee:hover{animation-play-state:paused}.marquee .cell{position:relative;display:inline-block;font-size:16px;width:25%;padding:8px;height:100px}.marquee .cell .content{position:absolute;top:8px;left:8px;bottom:8px;right:8px;padding:8px;color:#fff;background:crimson}/* prism.js default theme for JavaScript, CSS and HTML @author Lea Verou */.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#999}.namespace{  opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted {  color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color: #690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:rgba(255,255,255,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function {color:#DD4A68}.token.regex,.token.important,.token.variable {color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
    </style>
  </head>
  <body>
    <amp-font layout="nodisplay" font-family="Rubik" timeout="6000" on-error-add-class="fonts-missing" on-load-add-class="fonts-loaded"></amp-font>
    <main>
      <header>
        <a href="https://amdouglas.com/">A. M. Douglas</a>
      </header>
      <nav>
        <a href="https://amdouglas.com/">Home</a> &bull;
        <a href="https://amdouglas.com/blog/">Archive</a>
      </nav>
      <article>
        <h1>Meet the new Web Animations API</h1>
        <section>
          <p>While browser support for the Web Animations API (WAAPI) may look rather bleak at the moment, when the other browsers catch up, it will be the sharpest and fastest way to animate anything without resorting to WebGL, since it enables us to programmatically create CSS3 animations, which are subject to a very healthy helping of browser optimisation.</p>
          <p>But WAAPI is much, much more than that. It's not just an opportunity to throw out all your animation libraries like GSAP, Velocity.js, jQuery, etc. CSS3 Animations already gave you that opportunity for basic things like fading content in and out. WAAPI enables you to play, pause, rewind and cancel animations as though they were videos. You can even alter the speed at which the animation is playing. The potential is absolutely enormous.</p>
          <p>So let's get our teeth into the thing.</p>
          <h2>Recap: CSS Animations</h2>
          <p>I think it's best to approach WAAPI with at least a little familiarity with CSS animations. The syntax looks something like this:</p>
          <pre class=" language-css">
            <code class=" language-css">
<span class="token atrule"><span class="token rule">@keyframes</span> my-animation</span> <span class="token punctuation">{</span>
  <span class="token selector">from, 0%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">to, 100%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.my-element</span> <span class="token punctuation">{</span>
             <span class="token property">animation-name</span><span class="token punctuation">:</span> my-animation<span class="token punctuation">;</span>
  <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.4,0,0.2,1<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token property">animation-duration</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>
  <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
        <span class="token property">animation-direction</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
            <span class="token property">animation-delay</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>
       <span class="token property">animation-play-state</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
            </code>
          </pre>
          <p>So, let's look at this bit by bit. The <code>@keyframes</code> statement is the definition of your animation. You use this to say precisely what will happen across the time specified in your element's <code>animation-duration</code> property. When you have two states, you can use <code>from</code> and <code>to</code>, but when you have multiple keyframes you need to specify a percentage value, representing at what percentage of the total duration that keyframe should fire.</p>
          <p>The rest is pretty self-explanatory. The <code>animation-name</code> is required and must match a set of keyframes you specified. The <code>animation-timing-function</code> works exactly as it does for CSS transitions, and includes the usual predefined defaults like <code>linear</code>, <code>ease</code>, and so on. You can also define your own bezier curves, which I prefer to do because I like the 'fast in, slow out' curve I've given as an example above.</p>
          <p><code>animation-play-state</code> is a new property. CSS Animations have been available for developers to use for a long time now, with even browsers as old as Safari 5.1 supporting a prefixed version of the above syntax. <code>animation-play-state</code> is something new, which seems to have arrived in Chrome since the last beta update (I just updated to Chrome 54 and I have only just seen this property become available). This is of course landing as a result of the Web Animation API's play/pause functionality being realised, because you might as well provide access to that functionality through CSS so that animations can be paused and played using <code>:hover</code> or <code>input:checked + .animated-element</code> and so on.</p>
          <p><code>animation-iteration-count</code> is important: you can create an everlasting animation by setting the iterations to be <code>infinite</code>, and we'll be using that later when we build a demo of WAAPI.</p>
          <p>So, with the code above, you could quite easily make this:</p>
          <p class="demo">Blink</p>
          <p>Lovely. But what if you wanted to make something like a carousel, or a scrolling marquee style product showcase? Now that CSS has <code>animation-play-state</code>, it's quite easy to do with even the CSS syntax, but you'll need to know:</p>
          <ul>
            <li>how many elements will be in the carousel</li>
            <li>how big they are going to be, expressed as percentages or precise pixel counts</li>
          </ul>
          <p>and you'll also need all of the elements to be the same width. It seems like quite a lot, but actually it's fairly reasonable to expect that your products will be displayed as squares of equal width, and that your back-end is setup to display, say, 12 products with a 'view more' button nearby.</p>
          <p>If, however, you really did get such a situation as my imaginary scrolling marquee/carousel featuring, say, photographs of different widths, how would you use animations then?</p>
          <h3>Enter WAAPI</h3>
          <p>Let's imagine our gallery. Our end result will look like this:</p>
          <div class="marquee">
            <div class="cell">
              <div class="content">1</div>
            </div>
            <div class="cell">
              <div class="content">2</div>
            </div>
            <div class="cell">
              <div class="content">3</div>
            </div>
            <div class="cell">
              <div class="content">4</div>
            </div>
            <div class="cell">
              <div class="content">5</div>
            </div>
            <div class="cell">
              <div class="content">6</div>
            </div>
            <div class="cell">
              <div class="content">7</div>
            </div>
            <div class="cell">
              <div class="content">8</div>
            </div>
          </div>
          <p>I've used CSS to create that marquee, which is easy enough with a known number of equal-width elements. 8 elements, 25% each, so that's a translation in X of -100%. Let's have a look at how to achieve this for an unknown number of random-width elements:</p>
          <p>The CSS for that animated marquee looks like this:</p>
          <pre class="language-css">
            <code class=" language-css">
<span class="token atrule"><span class="token rule">@keyframes</span> marquee1</span> <span class="token punctuation">{</span>
  <span class="token selector">from, 0%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0,0,0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">to, 100%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100%,0,0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.marquee</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">animation-name</span><span class="token punctuation">:</span> marquee1<span class="token punctuation">;</span>
  <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>
  <span class="token property">animation-duration</span><span class="token punctuation">:</span> 8s<span class="token punctuation">;</span>
  <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> infinite<span class="token punctuation">;</span>
  <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
  <span class="token property">animation-direction</span><span class="token punctuation">:</span> alternate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.marquee:hover</span><span class="token punctuation">{</span>
  <span class="token property">animation-play-state</span><span class="token punctuation">:</span>paused<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.marquee .cell</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.marquee .cell .content</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> crimson<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
            </code>
          </pre>
          <p>The code we'll use for our JavaScript WAAPI example will look like this:</p>
          <p><strong>The HTML:</strong></p>
          <pre class="language-html">
            <code class=" language-html">
<span class="token doctype">&lt;!doctype html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width,initial-scale<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>grid<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w33<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          1
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w66<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          2
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w100<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          3
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w83<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          4
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w16<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          5
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w25<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          6
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w25<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          7
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          8
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w100<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          9
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w75<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          10
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cell w25<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          Finish
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
            </code>
          </pre>
          <p><strong>The CSS:</strong></p>
          <pre class="language-css">
            <code class=" language-css">
<span class="token selector">*</span> <span class="token punctuation">{</span> <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box <span class="token punctuation">}</span>

<span class="token selector">body</span>  <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token property">background</span><span class="token punctuation">:</span> #08f <span class="token punctuation">}</span>
<span class="token selector">.grid</span> <span class="token punctuation">{</span> <span class="token property">font-size</span><span class="token punctuation">:</span> 0 <span class="token punctuation">}</span>
<span class="token selector">.cell</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30vh<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem .5rem<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.cell .content</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> .5rem<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> .5rem<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> .5rem<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> .5rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.cell.w16</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / 6<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token selector">.cell.w25</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 25% <span class="token punctuation">}</span>
<span class="token selector">.cell.w33</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / 3<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token selector">.cell.w50</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 50% <span class="token punctuation">}</span>
<span class="token selector">.cell.w66</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / <span class="token punctuation">(</span>3 / 2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token selector">.cell.w75</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 75% <span class="token punctuation">}</span>
<span class="token selector">.cell.w83</span>  <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / <span class="token punctuation">(</span>6 / 5<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token selector">.cell.w100</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100% <span class="token punctuation">}</span>
            </code>
          </pre>
          <p>So that's a grid and 10 grid cells, each serving as containers for an image or something like that. I'm just using numbers for now. To turn this into something which we can scroll horizontally, we need to first set the <code>.grid</code> element's <code>white-space</code> property to <code>nowrap</code>. We'll do this using JavaScript, so that the items appear as a normal grid if JavaScript is turned off or if WAAPI is not supported.</p>
          <p>We need to find our grid element and its children, get the combined width of the children, subtract from that the width of the containing element, and then programmatically animate the grid to translate itself by the number of pixels we calculated earlier, before returning to its original position.</p>
          <p>If that sounds complicated, it's not about to get any simpler:</p>
          <pre class="language-javascript">
            <code class=" language-javascript">
<span class="token comment">// First, create a variable to be a reference to our animation later, </span>
<span class="token comment">// so by using a closure, we can start, stop and cancel the animation.</span>
<span class="token keyword">var</span> marquee<span class="token punctuation">;</span>

<span class="token comment">// Then let's grab the element we're going to move around</span>
<span class="token keyword">var</span> marquee_el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span> <span class="token string">'.grid.marquee'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// and its children, so we know how much we have to move it around by</span>
<span class="token keyword">var</span> children <span class="token operator">=</span> marquee_el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span> <span class="token string">'.cell'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createMarquee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token comment">/*
  We're going to recreate the marquee animation
  when the viewport is resized, so get rid of
  any existing animation first
  */</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> marquee <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token punctuation">)</span> marquee<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// We set this dynamically, so the thing will </span>
  <span class="token comment">// gracefully degrade to a typical grid of items</span>
  marquee_el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>whiteSpace <span class="token operator">=</span> <span class="token string">'nowrap'</span><span class="token punctuation">;</span>

  <span class="token comment">// Create a variable for the distance by which</span>
  <span class="token comment">// the grid element will be transformed</span>
  <span class="token keyword">var</span> displacement <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// Add up the width of all the elements in the marquee</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>j <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    displacement <span class="token operator">+</span><span class="token operator">=</span> children<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/*
  Crucial: subtract the width of the container;
  Optional: take the opportunity to round the displacement
  value down to the nearest pixel. The browser may thank
  you for this by not blurring the shit out of your text.
  */</span>
  displacement <span class="token operator">=</span> <span class="token punctuation">(</span>displacement <span class="token operator">-</span> marquee_el<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">/*
  Now for the juicy part. The WAAPI.
  By using the variable 'marquee' we created in the parent scope,
  we can easily use the reference to pause/cancel the animation later
  */</span>
  marquee <span class="token operator">=</span> marquee_el<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token comment">/*
    element.animate() accepts two arguments: an array of keyframes
    and a sort of configuration object, much like the CSS syntax.

    First are your keyframes: so your 'from' or '0%' keyframe
    translates to 'offset: 0', '100%' translates to 'offset: 1',
    and anything in betwen like '54%' will be 'offset: .54'. One
    object per keyframe. The ability to define a dynamic
    translateX value already gives you an idea of why WAAPI is useful:
    */</span>
    <span class="token punctuation">{</span>transform<span class="token punctuation">:</span><span class="token string">'matrix(1,0.00,0.00,1, 0, 0)'</span><span class="token punctuation">,</span> offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>transform<span class="token punctuation">:</span><span class="token string">'matrix(1,0.00,0.00,1,'</span><span class="token operator">+</span> <span class="token operator">-</span>displacement <span class="token operator">+</span><span class="token string">', 0)'</span><span class="token punctuation">,</span> offset<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token comment">// you don't have to use matrix, I just like it.</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 1 second for each element in marquee</span>
    <span class="token comment">// Entirely arbitrary decision</span>
    duration<span class="token punctuation">:</span> children<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">1e3</span><span class="token punctuation">,</span>

    <span class="token comment">/*
    Can be 'ease', 'cubic-bezier(.4,0,.2,1)', etc.
    can also be a stepping function, like 'steps(4)', 'steps(10, end)'
    see 'MDN: Using the Web Animations API' (https://goo.gl/PtVEkQ)
    */</span>
    easing<span class="token punctuation">:</span> <span class="token string">'linear'</span><span class="token punctuation">,</span>

    <span class="token comment">// Useful if you don't want the animation to start until your content</span>
    <span class="token comment">// has loaded from, say, a REST API and you want to speculate a </span>
    <span class="token comment">// reasonable time for that to take</span>
    delay<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

    <span class="token comment">// Kind of crucial for what we want to make...</span>
    <span class="token comment">// NB: 'Infinity' not 'infinite'</span>
    iterations<span class="token punctuation">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>

    <span class="token comment">// Invert animation after completion, so it scrolls backwards */</span>
    direction<span class="token punctuation">:</span> <span class="token string">'alternate'</span><span class="token punctuation">,</span>

    <span class="token comment">/*
    You would use this if your animation is set to occur only a
    finite number of times, and you wanted the animated element to finish at
    the end keyframe, rather than the first keyframe
    */</span>
    fill<span class="token punctuation">:</span> <span class="token string">'forwards'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
            </code>
          </pre>
          <p>This might look hideously complicated, but this kind of brevity to unlock the kind of performance and fluidity of animation is unprecedented. With jQuery and $(element).animate(), you'd have plenty of framedropping and jankiness to enjoy. With GSAP/Velocity.js, the story is a good deal better, but they both still represent an additional JavaScript library and HTTP request at the end of the day.</p>
          <p>This is just a function.</p>
          <p>Now, maybe you don't think it's particularly brief/terse. But if I just remove my comments...</p>
          <pre class="language-javascript">
            <code class=" language-javascript">
<span class="token keyword">function</span> <span class="token function">createMarquee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> marquee <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> marquee<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> displacement <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  marquee_el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>whiteSpace <span class="token operator">=</span> <span class="token string">'nowrap'</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> displacement <span class="token operator">+</span><span class="token operator">=</span> children<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>

  displacement <span class="token operator">=</span> <span class="token punctuation">(</span>displacement<span class="token operator">-</span>marquee_el<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

  marquee <span class="token operator">=</span> marquee_el<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> transform<span class="token punctuation">:</span> <span class="token string">'matrix(1,0.00,0.00,1, 0, 0)'</span><span class="token punctuation">,</span> offset<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> transform<span class="token punctuation">:</span> <span class="token string">'matrix(1,0.00,0.00,1,'</span><span class="token operator">+</span><span class="token operator">-</span>displacement<span class="token operator">+</span><span class="token string">',0)'</span><span class="token punctuation">,</span> offset<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    duration<span class="token punctuation">:</span> children<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">1e3</span><span class="token punctuation">,</span>
    easing<span class="token punctuation">:</span> <span class="token string">'linear'</span><span class="token punctuation">,</span>
    delay<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    iterations<span class="token punctuation">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    direction<span class="token punctuation">:</span> <span class="token string">'alternate'</span><span class="token punctuation">,</span>
    fill<span class="token punctuation">:</span> <span class="token string">'forwards'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
            </code>
          </pre>
          <p>Yeah, pretty brief. Of course, you still need to check to see if your user's browser supports WAAPI and then you ought to plan for things like a browser viewport resize, and add some event handlers to take care of the user hovering on one of the scrolling items for a closer look:</p>
          <pre class="language-javascript">
            <code class=" language-javascript">
<span class="token comment">// quick check for the WAAPI method</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'animate'</span> <span class="token keyword">in</span> marquee_el <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> marquee_el<span class="token punctuation">.</span>animate <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// okay, let's fire up the marquee!</span>
  <span class="token function">createMarquee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// now for the playing/pausing</span>
  marquee_el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> pauseMarquee<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  marquee_el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> playMarquee<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// and resizing</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span> createMarquee <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
  Let's say hello to those using Safari
  or indeed users of IE, not-recently-updated FF, old Chrome, old Opera, etc.
  They will see a standard grid of items
  */</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Your browser does not support the Web Animation API'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// pretty self-explanatory</span>
<span class="token comment">// though this is why we needed that closure I mentioned</span>
<span class="token keyword">function</span> <span class="token function">playMarquee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> marquee<span class="token punctuation">.</span>playState <span class="token operator">&amp;&amp;</span> marquee<span class="token punctuation">.</span>playState <span class="token operator">===</span> <span class="token string">'paused'</span> <span class="token punctuation">)</span>
    marquee<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// again, pretty self-explanatory</span>
<span class="token keyword">function</span> <span class="token function">pauseMarquee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> marquee<span class="token punctuation">.</span>playState <span class="token operator">&amp;&amp;</span> marquee<span class="token punctuation">.</span>playState <span class="token operator">===</span> <span class="token string">'running'</span> <span class="token punctuation">)</span>
    marquee<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// a debouncing function using requestAnimationFrame</span>
<span class="token comment">// this is just an easy-to-use wrapper I like to use for event handlers</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> scheduled<span class="token punctuation">,</span> context<span class="token punctuation">,</span> args<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
      args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">!</span><span class="token operator">!</span>scheduled <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>scheduled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    scheduled <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      scheduled <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
            </code>
          </pre>
          <p><a href="https://codepen.io/amdouglas/pen/WGBOzq">(Open in Codepen)</a> &middot; <a href="http://codepen.io/amdouglas/full/WGBOzq/">(View live demo)</a></p>
          <p>This still might not seem that great: now that browsers will support the <code>animation-play-state</code> as a CSS property, open to manipulation from hover effects and so on, the value of the WAAPI may be constrained to edge cases. But now at least, when there is an edge case, there is a simple and clean way to approach it, without libraries or horribly inaccurate setTimeouts/Intervals.</p>
          <p><span class="cursor">&#9608;</span></p>
        </section>
        <footer>
          <a href="https://amdouglas.com/blog/asynchronous-css-the-easy-way/">
            <header>Previously</header>
            <section>
              <h4>Asynchronous CSS: the Easy Way</h4>
              <p>Given that it's coming up to Christmas, there obviously couldn't be a more appropriate time to think about adding or customising an e-commerce experience with your own take on the Stripe form</p>
              <hr>
              <p><time datetime="2016-09-30 23:32">30 September 2016</time></p>
            </section>
          </a>
        </footer>
        <div class="social-share">
          <amp-social-share type="email" width="48" height="36"></amp-social-share>
          <amp-social-share type="twitter" width="48" height="36"></amp-social-share>
          <amp-social-share type="facebook" width="48" height="36" data-attribution="407402372749613"></amp-social-share>
          <amp-social-share type="gplus" width="48" height="36"></amp-social-share>
          <amp-social-share type="linkedin" width="48" height="36"></amp-social-share>
        </div>
      </article>
    </main>
    <amp-user-notification layout="nodisplay" id="amp-user-notification1">
      <p>Cookies are in use on this website.</p>
      <a href="https://amdouglas.com/privacy/">About your privacy</a>
      <button on="tap:amp-user-notification1.dismiss">Accept</button>
    </amp-user-notification>
    <amp-analytics type="googleanalytics">
      <script type="application/json">
        {
          "vars": {
            "account": "UA-70873652-1"
          },
           "triggers": {
            "trackPageview": {
              "on": "visible",
              "request": "pageview"
            }
          }
        }
      </script>
    </amp-analytics>
    <amp-install-serviceworker src="https://amdouglas.com/sw.js" data-iframe-src="https://amdouglas.com/sw-ifr.html" layout="nodisplay"></amp-install-serviceworker>
  </body>
</html>
